<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KisanMitra ‚Äî Smart Farming Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --soil:#2D1B0E; --earth:#5C3D1E; --harvest:#E8B84B;
  --leaf:#3D7A3D; --leaf-light:#5BA55B; --cream:#FDF6E3;
  --rust:#C0392B; --success:#27AE60; --warn:#E67E22;
  --text:#1A0F0A; --muted:#7A6655; --nav-h:64px;
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:var(--cream);font-family:'Source Sans 3',sans-serif;color:var(--text)}

/* ‚ïê‚ïê‚ïê‚ïê NAVBAR ‚ïê‚ïê‚ïê‚ïê */
.navbar{
  position:fixed;top:0;left:0;right:0;z-index:200;height:var(--nav-h);
  background:var(--soil);display:flex;align-items:center;padding:0 32px;
  box-shadow:0 2px 20px rgba(0,0,0,0.3);
}
.nav-brand{display:flex;align-items:center;gap:10px;text-decoration:none;margin-right:auto;cursor:pointer}
.nav-logo{width:40px;height:40px;background:var(--harvest);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px;box-shadow:0 2px 10px rgba(228,184,75,0.4)}
.nav-brand-name{font-family:'Playfair Display',serif;font-size:22px;color:var(--harvest);font-weight:900}
.nav-brand-sub{font-size:10px;color:rgba(255,255,255,0.45);letter-spacing:1.5px;text-transform:uppercase;line-height:1}
.nav-links{display:flex;align-items:center;gap:2px}
.nav-link{
  padding:8px 14px;border-radius:8px;border:none;background:transparent;
  color:rgba(255,255,255,0.7);font-size:13px;font-weight:600;cursor:pointer;
  transition:all .2s;font-family:'Source Sans 3',sans-serif;
}
.nav-link:hover,.nav-link.active{background:rgba(228,184,75,0.15);color:var(--harvest)}
.nav-cta{
  margin-left:12px;padding:8px 18px;background:var(--harvest);color:var(--soil);
  border:none;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;
  transition:all .2s;font-family:'Source Sans 3',sans-serif;
}
.nav-cta:hover{background:#F5D76E;transform:translateY(-1px)}
.nav-lang{display:flex;gap:5px;margin-left:14px}
.lang-btn{
  padding:5px 11px;border-radius:16px;border:1px solid rgba(255,255,255,0.2);
  background:transparent;color:rgba(255,255,255,0.6);cursor:pointer;font-size:12px;
  transition:all .2s;font-family:'Source Sans 3',sans-serif;
}
.lang-btn.active{background:var(--harvest);color:var(--soil);border-color:var(--harvest);font-weight:700}

/* ‚ïê‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê‚ïê */
.hero-band{
  background:linear-gradient(135deg,var(--leaf) 0%,#1E4A1E 100%);
  padding:calc(var(--nav-h) + 48px) 40px 72px;
  position:relative;overflow:hidden;
}
.hero-band::after{content:'';position:absolute;bottom:-2px;left:0;right:0;height:50px;background:var(--cream);clip-path:ellipse(55% 100% at 50% 100%)}
.hero-band::before{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.025'%3E%3Cpath d='M40 10 Q50 25 40 40 Q30 25 40 10Z'/%3E%3C/g%3E%3C/svg%3E") repeat;
}
.hero-inner{max-width:1180px;margin:0 auto;display:grid;grid-template-columns:1.1fr 0.9fr;gap:48px;align-items:center;position:relative;z-index:1}
.hero-h1{font-family:'Playfair Display',serif;font-size:50px;color:#fff;line-height:1.15;margin-bottom:16px}
.hero-h1 span{color:var(--harvest)}
.hero-p{color:rgba(255,255,255,0.82);font-size:16px;line-height:1.75;margin-bottom:28px}
.hero-btns{display:flex;gap:12px;flex-wrap:wrap}
.btn-primary{padding:13px 26px;background:var(--harvest);color:var(--soil);border:none;border-radius:10px;font-size:15px;font-weight:700;cursor:pointer;transition:all .2s;font-family:'Source Sans 3',sans-serif}
.btn-primary:hover{background:#F5D76E;transform:translateY(-2px);box-shadow:0 6px 20px rgba(228,184,75,0.4)}
.btn-outline{padding:13px 26px;background:transparent;color:#fff;border:2px solid rgba(255,255,255,0.4);border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s;font-family:'Source Sans 3',sans-serif}
.btn-outline:hover{border-color:#fff;background:rgba(255,255,255,0.08)}
.hero-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:30px}
.stat-box{background:rgba(255,255,255,0.09);border:1px solid rgba(255,255,255,0.13);border-radius:12px;padding:14px;text-align:center}
.stat-num{font-family:'Playfair Display',serif;font-size:26px;font-weight:900;color:var(--harvest)}
.stat-lbl{font-size:11px;color:rgba(255,255,255,0.6);margin-top:2px}
.hero-pills{display:flex;gap:8px;flex-wrap:wrap;margin-top:18px}
.hero-pill{background:rgba(255,255,255,0.12);border:1px solid rgba(255,255,255,0.18);border-radius:30px;padding:6px 13px;color:#fff;font-size:12px;font-weight:600}
.feature-cards{display:flex;flex-direction:column;gap:12px}
.feat-card{background:rgba(255,255,255,0.09);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.15);border-radius:14px;padding:16px;display:flex;align-items:flex-start;gap:13px}
.feat-icon{font-size:24px;flex-shrink:0}
.feat-card h4{font-size:14px;font-weight:700;color:#fff;margin-bottom:3px}
.feat-card p{font-size:12px;color:rgba(255,255,255,0.65);line-height:1.45}

/* ‚ïê‚ïê‚ïê‚ïê SECTION WRAPPER ‚ïê‚ïê‚ïê‚ïê */
.sec-wrap{max-width:1180px;margin:0 auto;padding:70px 24px}
.sec-title{font-family:'Playfair Display',serif;font-size:32px;color:var(--soil);margin-bottom:6px}
.sec-sub{color:var(--muted);font-size:14px;margin-bottom:32px}

/* ‚ïê‚ïê‚ïê‚ïê ANALYZER ‚ïê‚ïê‚ïê‚ïê */
#analyzer{scroll-margin-top:var(--nav-h)}
.input-card{background:#fff;border-radius:20px;padding:30px;box-shadow:0 2px 24px rgba(45,27,14,0.08);border:1px solid rgba(45,27,14,0.06);margin-bottom:28px}
.card-title{font-family:'Playfair Display',serif;font-size:19px;color:var(--soil);margin-bottom:3px;display:flex;align-items:center;gap:9px}
.card-sub{color:var(--muted);font-size:13px;margin-bottom:20px}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(185px,1fr));gap:16px;margin-bottom:20px}
.form-group label{display:block;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--earth);margin-bottom:5px}
.form-group select,.form-group input{width:100%;padding:10px 13px;border:2px solid rgba(45,27,14,0.1);border-radius:10px;font-family:'Source Sans 3',sans-serif;font-size:14px;color:var(--text);background:var(--cream);outline:none;transition:border-color .2s;cursor:pointer}
.form-group select:focus,.form-group input:focus{border-color:var(--leaf)}
.analyze-btn{width:100%;padding:15px;background:linear-gradient(135deg,var(--leaf),#1E4A1E);color:#fff;border:none;border-radius:12px;font-family:'Source Sans 3',sans-serif;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s}
.analyze-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(61,122,61,0.4)}

/* results */
.results-section{display:none}
.results-section.visible{display:block;animation:fadeUp .5s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.kpi-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px;margin-bottom:18px}
.kpi-card{background:#fff;border-radius:16px;padding:22px;text-align:center;box-shadow:0 2px 14px rgba(45,27,14,0.06);border:1px solid rgba(45,27,14,0.06);position:relative;overflow:hidden}
.kpi-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;border-radius:16px 16px 0 0}
.kpi-card.g::before{background:linear-gradient(90deg,var(--leaf),var(--leaf-light))}
.kpi-card.o::before{background:linear-gradient(90deg,var(--warn),#F39C12)}
.kpi-card.b::before{background:linear-gradient(90deg,#2980B9,#3498DB)}
.kpi-lbl{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:7px}
.kpi-val{font-family:'Playfair Display',serif;font-size:30px;font-weight:900;line-height:1;margin-bottom:4px}
.kpi-card.g .kpi-val{color:var(--leaf)}.kpi-card.o .kpi-val{color:var(--warn)}.kpi-card.b .kpi-val{color:#2980B9}
.kpi-desc{font-size:12px;color:var(--muted)}
.mod-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}
.mod-card{background:#fff;border-radius:16px;padding:24px;box-shadow:0 2px 14px rgba(45,27,14,0.06);border:1px solid rgba(45,27,14,0.06)}
.mod-hdr{display:flex;align-items:center;gap:11px;margin-bottom:13px}
.mod-icon{width:40px;height:40px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.mod-icon.g{background:rgba(61,122,61,0.1)}.mod-icon.o{background:rgba(230,126,34,0.1)}.mod-icon.b{background:rgba(41,128,185,0.1)}.mod-icon.r{background:rgba(192,57,43,0.1)}
.mod-hdr-t h3{font-family:'Playfair Display',serif;font-size:16px;color:var(--soil)}
.mod-hdr-t p{font-size:11px;color:var(--muted)}
.timeline-track{height:7px;background:rgba(45,27,14,0.08);border-radius:4px;position:relative;margin-bottom:5px}
.timeline-fill{position:absolute;top:0;height:100%;border-radius:4px;background:linear-gradient(90deg,var(--leaf-light),var(--harvest))}
.timeline-marker{position:absolute;top:50%;transform:translateY(-50%);width:13px;height:13px;background:var(--harvest);border:3px solid #fff;border-radius:50%;box-shadow:0 2px 8px rgba(228,184,75,0.5)}
.tl-labels{display:flex;justify-content:space-between;font-size:10px;color:var(--muted)}
.harvest-rec{background:linear-gradient(135deg,rgba(61,122,61,0.06),rgba(61,122,61,0.02));border:1.5px solid rgba(61,122,61,0.2);border-radius:11px;padding:13px;margin-top:11px}
.rec-main{font-size:17px;font-weight:700;color:var(--leaf);margin-bottom:3px}
.rec-sub{font-size:12px;color:var(--muted);line-height:1.5}
.flist{display:flex;flex-direction:column;gap:6px;margin-top:9px}
.fi{display:flex;align-items:center;gap:9px;padding:6px 10px;border-radius:7px;background:rgba(45,27,14,0.03);font-size:12px}
.fi.good{border-left:3px solid var(--success)}.fi.warn{border-left:3px solid var(--warn)}.fi.bad{border-left:3px solid var(--rust)}
.fdot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.fi.good .fdot{background:var(--success)}.fi.warn .fdot{background:var(--warn)}.fi.bad .fdot{background:var(--rust)}
.mkt-tbl{width:100%;border-collapse:collapse;font-size:12px;margin-top:7px}
.mkt-tbl th{text-align:left;padding:6px 8px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);border-bottom:2px solid rgba(45,27,14,0.08)}
.mkt-tbl td{padding:8px 8px;border-bottom:1px solid rgba(45,27,14,0.05);vertical-align:middle}
.mkt-tbl tr.br{background:rgba(61,122,61,0.05)}
.best-badge{background:var(--leaf);color:#fff;font-size:9px;font-weight:700;padding:2px 6px;border-radius:8px;text-transform:uppercase;margin-left:4px}
.pbar-wrap{display:flex;align-items:center;gap:5px}
.pbar{height:5px;border-radius:3px;background:var(--leaf)}
.gauge-wrap{display:flex;align-items:center;gap:16px;margin:10px 0 13px}
.gauge-c{width:84px;height:84px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;flex-direction:column;position:relative}
.gauge-c svg{position:absolute;inset:0;transform:rotate(-90deg)}
.gauge-n{font-family:'Playfair Display',serif;font-size:22px;font-weight:900;position:relative;z-index:1;line-height:1}
.gauge-p{font-size:10px;color:var(--muted);position:relative;z-index:1}
.gauge-t h4{font-size:14px;font-weight:700;margin-bottom:3px}
.gauge-t p{font-size:12px;color:var(--muted);line-height:1.4}
.act-list{display:flex;flex-direction:column;gap:7px}
.act-item{display:flex;align-items:center;gap:10px;padding:8px 12px;border-radius:9px;border:1px solid rgba(45,27,14,0.08);background:rgba(253,246,227,0.5);transition:all .2s}
.act-item:hover{background:rgba(61,122,61,0.05);border-color:rgba(61,122,61,0.2)}
.act-rank{width:25px;height:25px;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;flex-shrink:0}
.act-rank.r1{background:rgba(39,174,96,0.15);color:var(--success)}.act-rank.r2{background:rgba(52,152,219,0.15);color:#2980B9}.act-rank.r3{background:rgba(230,126,34,0.15);color:var(--warn)}
.act-body{flex:1}
.act-name{font-size:13px;font-weight:600;color:var(--soil)}
.act-detail{font-size:11px;color:var(--muted)}
.act-cost{font-size:11px;font-weight:700;color:var(--earth);white-space:nowrap}
.dots{display:flex;gap:3px}
.dot{width:7px;height:7px;border-radius:50%;background:rgba(45,27,14,0.15)}
.dot.f{background:var(--leaf)}
.why-card{background:var(--soil);border-radius:20px;padding:28px;margin-top:16px;position:relative;overflow:hidden}
.why-card::before{content:'"';position:absolute;top:-20px;right:28px;font-family:'Playfair Display',serif;font-size:180px;color:rgba(255,255,255,0.03);pointer-events:none;line-height:1}
.reason-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(195px,1fr));gap:13px;margin-top:16px}
.reason-step{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:13px;padding:17px}
.rs-num{font-family:'Playfair Display',serif;font-size:30px;font-weight:900;color:rgba(228,184,75,0.3);line-height:1;margin-bottom:6px}
.rs-title{font-size:13px;font-weight:700;color:var(--harvest);margin-bottom:4px}
.rs-desc{font-size:12px;color:rgba(255,255,255,0.65);line-height:1.5}
.conf-banner{background:rgba(228,184,75,0.1);border:1px solid rgba(228,184,75,0.25);border-radius:11px;padding:12px 15px;display:flex;align-items:center;gap:12px;margin-top:14px}
.conf-t h4{font-size:12px;font-weight:700;color:var(--harvest);margin-bottom:2px}
.conf-t p{font-size:11px;color:rgba(255,255,255,0.55);line-height:1.4}
.conf-bar-o{width:85px;height:5px;background:rgba(255,255,255,0.1);border-radius:3px;overflow:hidden;margin-bottom:3px}
.conf-bar-i{height:100%;background:linear-gradient(90deg,var(--harvest),#F5D76E);border-radius:3px}
.conf-pct{font-size:11px;font-weight:700;color:var(--harvest)}

/* ‚ïê‚ïê‚ïê‚ïê ABOUT ‚ïê‚ïê‚ïê‚ïê */
#about{background:#fff;scroll-margin-top:var(--nav-h)}
.about-grid{display:grid;grid-template-columns:1fr 1fr;gap:56px;align-items:start;margin-top:36px}
.about-txt h3{font-family:'Playfair Display',serif;font-size:24px;color:var(--soil);margin-bottom:12px}
.about-txt p{color:var(--muted);line-height:1.8;margin-bottom:12px;font-size:14px}
.about-cards{display:grid;grid-template-columns:1fr 1fr;gap:13px}
.ab-card{background:var(--cream);border-radius:13px;padding:18px;border:1px solid rgba(45,27,14,0.07)}
.ab-icon{font-size:26px;margin-bottom:9px}
.ab-card h4{font-size:13px;font-weight:700;color:var(--soil);margin-bottom:4px}
.ab-card p{font-size:12px;color:var(--muted);line-height:1.5}
.mission-strip{margin-top:44px;padding-top:36px;border-top:1px solid rgba(45,27,14,0.08);text-align:center}
.mission-strip h3{font-family:'Playfair Display',serif;font-size:22px;color:var(--soil);margin-bottom:12px}
.mission-strip p{color:var(--muted);max-width:580px;margin:0 auto 28px;font-size:14px;line-height:1.75}
.team-row{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
.team-c{text-align:center}
.team-av{width:66px;height:66px;border-radius:50%;margin:0 auto 9px;display:flex;align-items:center;justify-content:center;font-size:26px}
.team-c h4{font-size:13px;font-weight:700;color:var(--soil)}
.team-c p{font-size:11px;color:var(--muted)}

/* ‚ïê‚ïê‚ïê‚ïê SCHEMES ‚ïê‚ïê‚ïê‚ïê */
#schemes{scroll-margin-top:var(--nav-h)}
.filter-row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:22px}
.fbtn{padding:7px 15px;border-radius:20px;border:2px solid rgba(45,27,14,0.12);background:transparent;color:var(--muted);cursor:pointer;font-size:13px;font-weight:600;transition:all .2s;font-family:'Source Sans 3',sans-serif}
.fbtn.active,.fbtn:hover{border-color:var(--leaf);background:rgba(61,122,61,0.08);color:var(--leaf)}
.schemes-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr));gap:18px}
.scheme-c{background:#fff;border-radius:16px;padding:22px;border:1px solid rgba(45,27,14,0.07);border-left:4px solid var(--leaf);box-shadow:0 2px 12px rgba(45,27,14,0.05);transition:all .2s;cursor:pointer}
.scheme-c:hover{transform:translateY(-3px);box-shadow:0 8px 26px rgba(45,27,14,0.1)}
.sch-badge{display:inline-block;padding:3px 9px;border-radius:18px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:11px}
.sch-badge.central{background:rgba(41,128,185,0.12);color:#2471A3}
.sch-badge.state{background:rgba(39,174,96,0.12);color:#1E8449}
.sch-badge.credit{background:rgba(230,126,34,0.12);color:#BA4A00}
.scheme-c h3{font-family:'Playfair Display',serif;font-size:16px;color:var(--soil);margin-bottom:7px}
.scheme-c p{font-size:13px;color:var(--muted);line-height:1.6;margin-bottom:12px}
.sch-benefit{display:flex;align-items:center;gap:7px;font-size:13px;font-weight:600;color:var(--leaf)}
.sch-tags{display:flex;gap:5px;flex-wrap:wrap;margin-top:10px}
.sch-tag{background:rgba(61,122,61,0.08);color:var(--leaf);font-size:11px;padding:2px 7px;border-radius:5px;font-weight:600}
.sch-link{display:inline-flex;align-items:center;gap:4px;margin-top:12px;font-size:12px;font-weight:700;color:var(--leaf);text-decoration:none}

/* ‚ïê‚ïê‚ïê‚ïê LOADING ‚ïê‚ïê‚ïê‚ïê */
.loading-overlay{position:fixed;inset:0;background:rgba(45,27,14,0.55);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:500}
.loading-overlay.active{display:flex}
.loading-box{background:#fff;border-radius:20px;padding:36px 44px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.2)}
.spin{width:54px;height:54px;border:4px solid rgba(61,122,61,0.15);border-top-color:var(--leaf);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
.ls-list{list-style:none;text-align:left;margin-top:13px}
.ls-list li{font-size:13px;color:var(--muted);padding:3px 0 3px 20px;position:relative}
.ls-list li::before{content:'‚óã';position:absolute;left:0;color:var(--muted)}
.ls-list li.done::before{content:'‚úì';color:var(--leaf)}
.ls-list li.active::before{content:'‚óâ';color:var(--harvest)}

/* ‚ïê‚ïê‚ïê‚ïê CHATBOT ‚ïê‚ïê‚ïê‚ïê */
.chat-fab{
  position:fixed;bottom:28px;right:28px;z-index:300;
  width:60px;height:60px;border-radius:50%;
  background:linear-gradient(135deg,var(--leaf),#1E4A1E);
  border:none;cursor:pointer;box-shadow:0 6px 22px rgba(61,122,61,0.5);
  display:flex;align-items:center;justify-content:center;font-size:24px;
  transition:all .3s;animation:fabP 3s ease-in-out infinite;
}
@keyframes fabP{0%,100%{box-shadow:0 6px 22px rgba(61,122,61,0.5)}50%{box-shadow:0 6px 34px rgba(61,122,61,0.8)}}
.chat-fab:hover{transform:scale(1.1)}
.fab-label{
  position:fixed;bottom:36px;right:98px;z-index:300;
  background:var(--soil);color:var(--harvest);font-size:12px;font-weight:700;
  padding:5px 11px;border-radius:18px;white-space:nowrap;pointer-events:none;
  box-shadow:0 3px 12px rgba(0,0,0,0.2);
}
.chat-win{
  position:fixed;bottom:98px;right:28px;z-index:300;
  width:355px;height:510px;background:#fff;border-radius:20px;
  box-shadow:0 20px 60px rgba(45,27,14,0.2);display:none;flex-direction:column;
  overflow:hidden;border:1px solid rgba(45,27,14,0.1);
}
.chat-win.open{display:flex;animation:chatO .3s ease}
@keyframes chatO{from{opacity:0;transform:translateY(18px) scale(0.95)}to{opacity:1;transform:translateY(0) scale(1)}}
.chat-hdr{background:linear-gradient(135deg,var(--leaf),#1E4A1E);padding:14px 18px;display:flex;align-items:center;gap:11px}
.chat-av{width:38px;height:38px;border-radius:50%;background:var(--harvest);display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.chat-hdr-t h4{font-size:14px;font-weight:700;color:#fff}
.chat-hdr-t p{font-size:11px;color:rgba(255,255,255,0.7)}
.chat-dot{width:8px;height:8px;border-radius:50%;background:#2ECC71;margin-left:auto}
.chat-x{background:rgba(255,255,255,0.15);border:none;color:#fff;width:26px;height:26px;border-radius:50%;cursor:pointer;font-size:13px;display:flex;align-items:center;justify-content:center}
.chat-msgs{flex:1;overflow-y:auto;padding:14px;display:flex;flex-direction:column;gap:9px}
.cmsg{max-width:84%}
.cmsg.bot{align-self:flex-start}.cmsg.user{align-self:flex-end}
.cbubble{padding:9px 13px;border-radius:13px;font-size:13px;line-height:1.5}
.cmsg.bot .cbubble{background:var(--cream);color:var(--text);border:1px solid rgba(45,27,14,0.08);border-radius:4px 13px 13px 13px}
.cmsg.user .cbubble{background:var(--leaf);color:#fff;border-radius:13px 4px 13px 13px}
.ctime{font-size:10px;color:var(--muted);margin-top:2px}
.cmsg.user .ctime{text-align:right}
.quick-btns{display:flex;flex-wrap:wrap;gap:5px;padding:8px 14px 0}
.qbtn{padding:5px 10px;border-radius:13px;border:1px solid rgba(61,122,61,0.25);background:rgba(61,122,61,0.06);color:var(--leaf);font-size:11px;font-weight:600;cursor:pointer;transition:all .2s;font-family:'Source Sans 3',sans-serif}
.qbtn:hover{background:var(--leaf);color:#fff}
.typing-row{display:none;padding:0 14px 0}
.typing-row.vis{display:flex}
.tbubble{background:var(--cream);border:1px solid rgba(45,27,14,0.08);border-radius:4px 13px 13px 13px;padding:9px 13px;display:flex;gap:4px;align-items:center}
.tdot{width:7px;height:7px;border-radius:50%;background:var(--muted);animation:tb 1.4s infinite}
.tdot:nth-child(2){animation-delay:.2s}.tdot:nth-child(3){animation-delay:.4s}
@keyframes tb{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-7px)}}
.chat-inp-row{padding:10px 14px;border-top:1px solid rgba(45,27,14,0.08);display:flex;gap:7px;align-items:center}
.chat-inp{flex:1;padding:8px 12px;border:2px solid rgba(45,27,14,0.1);border-radius:18px;font-family:'Source Sans 3',sans-serif;font-size:13px;outline:none;transition:border-color .2s;background:var(--cream)}
.chat-inp:focus{border-color:var(--leaf)}
.chat-send{width:34px;height:34px;border-radius:50%;background:var(--leaf);border:none;color:#fff;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}
.chat-send:hover{background:#2D5A2D;transform:scale(1.05)}

/* ‚ïê‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê‚ïê */
footer{background:var(--soil);padding:36px 24px;text-align:center}
.f-logo{font-family:'Playfair Display',serif;font-size:22px;color:var(--harvest);font-weight:900;margin-bottom:8px}
.f-sub{font-size:12px;color:rgba(255,255,255,0.4);margin-bottom:20px}
.f-links{display:flex;justify-content:center;gap:22px;flex-wrap:wrap;margin-bottom:18px}
.f-links a{color:rgba(255,255,255,0.6);font-size:13px;text-decoration:none}
.f-links a:hover{color:var(--harvest)}
.f-copy{font-size:11px;color:rgba(255,255,255,0.3)}

@media(max-width:900px){
  .hero-inner,.about-grid{grid-template-columns:1fr}.feature-cards{display:none}
  .kpi-row,.mod-grid,.reason-grid{grid-template-columns:1fr}
  .chat-win{width:calc(100vw - 28px);right:14px}
  .nav-links{display:none}
  .team-row{grid-template-columns:1fr 1fr}
}
@media(max-width:600px){
  .hero-h1{font-size:34px}.hero-stats,.about-cards{grid-template-columns:1fr 1fr}
  .form-grid{grid-template-columns:1fr 1fr}
}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="nav-brand" onclick="gotoSec('home')">
    <div class="nav-logo">üåæ</div>
    <div>
      <div class="nav-brand-name">KisanMitra</div>
      <div class="nav-brand-sub">Smart Farming Platform</div>
    </div>
  </div>
  <div class="nav-links">
    <button class="nav-link active" onclick="gotoSec('home',this)">üè† Home</button>
    <button class="nav-link" onclick="gotoSec('analyzer',this)">üîç Analyzer</button>
    <button class="nav-link" onclick="gotoSec('about',this)">‚ÑπÔ∏è About</button>
    <button class="nav-link" onclick="gotoSec('schemes',this)">üèõÔ∏è Govt Schemes</button>
  </div>
  <button class="nav-cta" onclick="gotoSec('analyzer',null)">‚ö° Free Analysis</button>
  <div class="nav-lang">
    <button class="lang-btn active" onclick="setLang('en',this)">EN</button>
    <button class="lang-btn" onclick="setLang('hi',this)">‡§π‡§ø</button>
  </div>
</nav>

<!-- LOADING OVERLAY -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-box">
    <div class="spin"></div>
    <h3 style="font-family:'Playfair Display',serif;color:var(--soil);margin-bottom:4px">Analyzing your crop‚Ä¶</h3>
    <p style="font-size:13px;color:var(--muted);margin-bottom:12px">Pulling real-time data from multiple sources</p>
    <ul class="ls-list" id="lsList">
      <li class="active" id="ls1">Fetching weather forecast (7-day)</li>
      <li id="ls2">Reading soil health indicators</li>
      <li id="ls3">Scanning mandi price history (90-day)</li>
      <li id="ls4">Calculating optimal harvest window</li>
      <li id="ls5">Assessing spoilage risk & storage</li>
      <li id="ls6">Ranking best markets by net profit</li>
    </ul>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê HOME ‚ïê‚ïê‚ïê‚ïê -->
<section id="home" style="scroll-margin-top:var(--nav-h)">
  <div class="hero-band">
    <div class="hero-inner">
      <div>
        <h1 class="hero-h1">Smart Farming,<br><span>Better Earnings</span><br>for Every Kisan</h1>
        <p class="hero-p">India's AI-powered farm-to-market platform. Know exactly <strong>when to harvest</strong>, <strong>where to sell</strong>, and <strong>how to store</strong> ‚Äî in plain language, in your language.</p>
        <div class="hero-btns">
          <button class="btn-primary" onclick="gotoSec('analyzer',null)">‚ö° Get Free Analysis</button>
          <button class="btn-outline" onclick="gotoSec('schemes',null)">üèõÔ∏è View Govt Schemes</button>
        </div>
        <div class="hero-stats">
          <div class="stat-box"><div class="stat-num">500+</div><div class="stat-lbl">Mandi Prices Tracked</div></div>
          <div class="stat-box"><div class="stat-num">40%</div><div class="stat-lbl">Avg Waste Reduction</div></div>
          <div class="stat-box"><div class="stat-num">9</div><div class="stat-lbl">Crops Supported</div></div>
        </div>
        <div class="hero-pills">
          <div class="hero-pill">üå°Ô∏è Live Weather</div>
          <div class="hero-pill">üìà Real Mandi Data</div>
          <div class="hero-pill">‚úÖ Explainable AI</div>
          <div class="hero-pill">üó£Ô∏è Hindi Support</div>
        </div>
      </div>
      <div class="feature-cards">
        <div class="feat-card"><div class="feat-icon">üåæ</div><div><h4>Harvest Window Advisor</h4><p>Weather + soil data combined to find your perfect 4-day harvest window.</p></div></div>
        <div class="feat-card"><div class="feat-icon">üè™</div><div><h4>Best Mandi Finder</h4><p>Net profit after transport ‚Äî not just the highest price. Real data from 500+ markets.</p></div></div>
        <div class="feat-card"><div class="feat-icon">üì¶</div><div><h4>Spoilage Risk Guard</h4><p>Post-harvest spoilage predicted. Preservation actions ranked by cost-effectiveness.</p></div></div>
        <div class="feat-card"><div class="feat-icon">ü§ñ</div><div><h4>Annadata AI Chat</h4><p>Ask farming questions in Hindi or English. Your personal advisor, 24√ó7.</p></div></div>
      </div>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê ANALYZER ‚ïê‚ïê‚ïê‚ïê -->
<section id="analyzer">
  <div class="sec-wrap">
    <div class="sec-title">üîç Crop Intelligence Analyzer</div>
    <div class="sec-sub">Enter your crop details ‚Äî get harvest timing, best market, spoilage risk & preservation advice in seconds</div>

    <div class="input-card">
      <div class="card-title"><span>üå±</span> Tell us about your crop</div>
      <div class="card-sub">All fields are used to give you the most accurate, personalised recommendation</div>
      <div class="form-grid">
        <div class="form-group">
          <label>Crop Type</label>
          <select id="cropType">
            <option value="tomato">üçÖ Tomato (‡§ü‡§Æ‡§æ‡§ü‡§∞)</option>
            <option value="wheat">üåæ Wheat (‡§ó‡•á‡§π‡•Ç‡§Ç)</option>
            <option value="rice">üçö Rice (‡§ö‡§æ‡§µ‡§≤)</option>
            <option value="onion">üßÖ Onion (‡§™‡•ç‡§Ø‡§æ‡§ú)</option>
            <option value="potato">ü•î Potato (‡§Ü‡§≤‡•Ç)</option>
            <option value="soybean">ü´ò Soybean (‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®)</option>
            <option value="cotton">üå∏ Cotton (‡§ï‡§™‡§æ‡§∏)</option>
            <option value="maize">üåΩ Maize (‡§Æ‡§ï‡•ç‡§ï‡§æ)</option>
          </select>
        </div>
        <div class="form-group">
          <label>State</label>
          <select id="state">
            <option value="maharashtra">Maharashtra</option>
            <option value="punjab">Punjab</option>
            <option value="uttar_pradesh">Uttar Pradesh</option>
            <option value="madhya_pradesh">Madhya Pradesh</option>
            <option value="rajasthan">Rajasthan</option>
            <option value="karnataka">Karnataka</option>
            <option value="gujarat">Gujarat</option>
            <option value="haryana">Haryana</option>
            <option value="andhra_pradesh">Andhra Pradesh</option>
            <option value="telangana">Telangana</option>
          </select>
        </div>
        <div class="form-group">
          <label>District / Mandi Area</label>
          <select id="district">
            <option value="nashik">Nashik</option>
            <option value="pune">Pune</option>
            <option value="nagpur">Nagpur</option>
            <option value="amravati">Amravati</option>
            <option value="kolhapur">Kolhapur</option>
            <option value="aurangabad">Aurangabad</option>
            <option value="indore">Indore</option>
            <option value="bhopal">Bhopal</option>
          </select>
        </div>
        <div class="form-group">
          <label>Harvest Stage</label>
          <select id="harvestStage">
            <option value="15days">Ready in ~15 days</option>
            <option value="7days">Ready in ~7 days</option>
            <option value="ready">Ready now</option>
            <option value="overdue">Slightly overdue</option>
          </select>
        </div>
        <div class="form-group">
          <label>Storage Available</label>
          <select id="storage">
            <option value="none">No cold storage</option>
            <option value="warehouse">Warehouse (dry)</option>
            <option value="cold">Cold storage</option>
            <option value="home">Home storage</option>
          </select>
        </div>
        <div class="form-group">
          <label>Land Size (acres)</label>
          <input type="number" id="landSize" value="2.5" min="0.5" step="0.5">
        </div>
      </div>
      <button class="analyze-btn" onclick="runAnalysis()">‚ö° Get My Recommendations ‚Äî Free</button>
    </div>

    <!-- RESULTS -->
    <div class="results-section" id="resultsSection">
      <div class="kpi-row">
        <div class="kpi-card g"><div class="kpi-lbl">Best Harvest Window</div><div class="kpi-val" id="harvestDateVal">‚Äî</div><div class="kpi-desc" id="harvestDaysVal">‚Äî</div></div>
        <div class="kpi-card o"><div class="kpi-lbl">Spoilage Risk</div><div class="kpi-val" id="spoilageVal">‚Äî</div><div class="kpi-desc" id="spoilageDescVal">‚Äî</div></div>
        <div class="kpi-card b"><div class="kpi-lbl">Expected Net Profit</div><div class="kpi-val" id="profitVal">‚Äî</div><div class="kpi-desc" id="profitDescVal">‚Äî</div></div>
      </div>
      <div class="mod-grid">
        <!-- Harvest -->
        <div class="mod-card">
          <div class="mod-hdr"><div class="mod-icon g">üåæ</div><div class="mod-hdr-t"><h3>Optimal Harvest Window</h3><p>Based on weather + crop maturity</p></div></div>
          <div style="padding:8px 0">
            <div class="timeline-track"><div class="timeline-fill" style="left:38%;width:26%"></div><div class="timeline-marker" style="left:51%"></div></div>
            <div class="tl-labels"><span>Today</span><span id="tl2">+5d</span><span id="tl3" style="color:var(--harvest);font-weight:700">Best ‚≠ê</span><span id="tl4">+20d</span></div>
          </div>
          <div class="harvest-rec"><div class="rec-main" id="harvestRec">‚Äî</div><div class="rec-sub" id="harvestRecSub">‚Äî</div></div>
          <div class="flist" id="harvestFactors"></div>
        </div>
        <!-- Markets -->
        <div class="mod-card">
          <div class="mod-hdr"><div class="mod-icon b">üè™</div><div class="mod-hdr-t"><h3>Best Market to Sell</h3><p>Price vs transport cost analysis</p></div></div>
          <table class="mkt-tbl"><thead><tr><th>Mandi</th><th>Price/kg</th><th>Transport</th><th>Net Profit</th></tr></thead><tbody id="mktBody"></tbody></table>
          <div id="trendAlert" style="margin-top:10px"></div>
        </div>
        <!-- Spoilage -->
        <div class="mod-card">
          <div class="mod-hdr"><div class="mod-icon o">‚ö†Ô∏è</div><div class="mod-hdr-t"><h3>Post-Harvest Spoilage Risk</h3><p>Storage + transit analysis</p></div></div>
          <div class="gauge-wrap">
            <div class="gauge-c">
              <svg viewBox="0 0 84 84" width="84" height="84">
                <circle cx="42" cy="42" r="34" fill="none" stroke="rgba(45,27,14,0.08)" stroke-width="7"/>
                <circle id="gaugeArc" cx="42" cy="42" r="34" fill="none" stroke="#E67E22" stroke-width="7" stroke-dasharray="213.6" stroke-dashoffset="141" stroke-linecap="round"/>
              </svg>
              <span class="gauge-n" id="gaugeN" style="color:#E67E22">‚Äî</span>
              <span class="gauge-p">risk</span>
            </div>
            <div class="gauge-t"><h4 id="gaugeL" style="color:#E67E22">‚Äî</h4><p id="gaugeD">‚Äî</p></div>
          </div>
          <div class="flist" id="spoilageFacts"></div>
        </div>
        <!-- Actions -->
        <div class="mod-card">
          <div class="mod-hdr"><div class="mod-icon r">üõ°Ô∏è</div><div class="mod-hdr-t"><h3>Preservation Actions</h3><p>Ranked by cost-effectiveness</p></div></div>
          <div class="act-list" id="actList"></div>
        </div>
      </div>
      <!-- WHY PANEL -->
      <div class="why-card">
        <div style="display:flex;align-items:center;gap:9px;margin-bottom:3px">
          <span style="font-size:19px">ü§î</span>
          <span style="font-family:'Playfair Display',serif;font-size:19px;color:var(--harvest);font-weight:700">Why did we recommend this?</span>
        </div>
        <div style="color:rgba(255,255,255,0.5);font-size:12px;margin-bottom:2px">Every recommendation comes with a full explanation ‚Äî because trust matters as much as accuracy</div>
        <div class="reason-grid" id="reasonGrid"></div>
        <div class="conf-banner">
          <span style="font-size:19px">üéØ</span>
          <div class="conf-t"><h4 id="confTitle">‚Äî</h4><p id="confBasis">‚Äî</p></div>
          <div style="margin-left:auto;flex-shrink:0;text-align:right">
            <div class="conf-bar-o"><div class="conf-bar-i" id="confBar" style="width:0%"></div></div>
            <div class="conf-pct" id="confPct">‚Äî</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê ABOUT ‚ïê‚ïê‚ïê‚ïê -->
<section id="about">
  <div class="sec-wrap">
    <div class="sec-title">‚ÑπÔ∏è About KisanMitra</div>
    <div class="sec-sub">Built to solve India's farm-to-market intelligence gap</div>
    <div class="about-grid">
      <div class="about-txt">
        <h3>The Problem We're Solving</h3>
        <p>India's farmers lose up to <strong>40% of produce</strong> not because of poor farming ‚Äî but poor timing and market mismatch. A farmer in Nashik may harvest tomatoes the same day 200 others do, crashing mandi prices.</p>
        <p>KisanMitra combines real weather data, soil health indicators, and live mandi price history to recommend the <strong>optimal harvest window</strong> and <strong>best target market</strong> for every crop and region.</p>
        <p>Every recommendation is explained in plain language ‚Äî because a farmer must <em>trust</em> advice before acting on it, especially when their livelihood is at stake.</p>
      </div>
      <div class="about-cards">
        <div class="ab-card"><div class="ab-icon">üå¶Ô∏è</div><h4>Weather Intelligence</h4><p>7-day IMD-based forecasts integrated into every harvest recommendation.</p></div>
        <div class="ab-card"><div class="ab-icon">üìä</div><h4>Real Mandi Data</h4><p>AGMARKNET price data from 500+ mandis across India, updated daily.</p></div>
        <div class="ab-card"><div class="ab-icon">üß™</div><h4>Soil Health Aware</h4><p>Crop maturity windows calibrated with soil moisture and nutrient data.</p></div>
        <div class="ab-card"><div class="ab-icon">üó£Ô∏è</div><h4>Built for Farmers</h4><p>Plain language, Hindi support ‚Äî works on a basic Android phone.</p></div>
      </div>
    </div>
    <div class="mission-strip">
      <h3>Our Mission</h3>
      <p>Technology should work <em>for</em> the farmer, not the other way around. We design every feature asking: <em>"Can a farmer with a basic Android phone understand and trust this?"</em></p>
      <div class="team-row">
        <div class="team-c"><div class="team-av" style="background:rgba(61,122,61,0.1)">üë®‚Äçüíª</div><h4>AI/ML Team</h4><p>Harvest & price models</p></div>
        <div class="team-c"><div class="team-av" style="background:rgba(41,128,185,0.1)">üìä</div><h4>Data Team</h4><p>Mandi & weather pipelines</p></div>
        <div class="team-c"><div class="team-av" style="background:rgba(230,126,34,0.1)">üé®</div><h4>Design Team</h4><p>Farmer-first UX</p></div>
        <div class="team-c"><div class="team-av" style="background:rgba(192,57,43,0.1)">üåæ</div><h4>Agri Advisors</h4><p>Domain validation</p></div>
      </div>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê GOVT SCHEMES ‚ïê‚ïê‚ïê‚ïê -->
<section id="schemes">
  <div class="sec-wrap">
    <div class="sec-title">üèõÔ∏è Government Farmer Schemes</div>
    <div class="sec-sub">Central & state schemes you may be eligible for ‚Äî updated 2024‚Äì25</div>
    <div class="filter-row">
      <button class="fbtn active" onclick="filterS('all',this)">All Schemes</button>
      <button class="fbtn" onclick="filterS('central',this)">üèõÔ∏è Central Govt</button>
      <button class="fbtn" onclick="filterS('state',this)">üó∫Ô∏è State Govt</button>
      <button class="fbtn" onclick="filterS('credit',this)">üí≥ Credit & Insurance</button>
    </div>
    <div class="schemes-grid" id="schemesGrid"></div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div style="max-width:1180px;margin:0 auto">
    <div class="f-logo">üåæ KisanMitra</div>
    <div class="f-sub">Smart Farming Platform ‚Äî Farm-to-Market Intelligence</div>
    <div class="f-links">
      <a href="#" onclick="gotoSec('home',null)">Home</a>
      <a href="#" onclick="gotoSec('analyzer',null)">Analyzer</a>
      <a href="#" onclick="gotoSec('about',null)">About</a>
      <a href="#" onclick="gotoSec('schemes',null)">Schemes</a>
      <a href="https://enam.gov.in" target="_blank">e-NAM</a>
      <a href="https://pmkisan.gov.in" target="_blank">PM-KISAN</a>
    </div>
    <div class="f-copy">¬© 2025 KisanMitra. Built with ‚ù§Ô∏è for Indian Farmers. | Data: AGMARKNET, IMD | Backend: AgriChain API</div>
  </div>
</footer>

<!-- ‚ïê‚ïê‚ïê‚ïê ANNADATA AI CHATBOT ‚ïê‚ïê‚ïê‚ïê -->
<div class="fab-label">Annadata AI üåæ</div>
<button class="chat-fab" onclick="toggleChat()" title="Ask Annadata AI">ü§ñ</button>
<div class="chat-win" id="chatWin">
  <div class="chat-hdr">
    <div class="chat-av">ü§ñ</div>
    <div class="chat-hdr-t"><h4>Annadata AI</h4><p>Your personal crop advisor</p></div>
    <div class="chat-dot"></div>
    <button class="chat-x" onclick="toggleChat()">‚úï</button>
  </div>
  <div class="chat-msgs" id="chatMsgs">
    <div class="cmsg bot">
      <div class="cbubble">üôè Namaste! I'm <strong>Annadata AI</strong> ‚Äî your personal farming assistant.<br><br>Ask me anything about crops, mandi prices, weather timing, or government schemes. Hindi or English ‚Äî both work! üåæ</div>
      <div class="ctime">Now</div>
    </div>
  </div>
  <div class="quick-btns" id="quickBtns">
    <button class="qbtn" onclick="quickAsk('Best time to sell tomatoes?')">üçÖ Tomato prices</button>
    <button class="qbtn" onclick="quickAsk('PM Kisan scheme details')">üèõÔ∏è PM Kisan</button>
    <button class="qbtn" onclick="quickAsk('How to reduce crop spoilage?')">üì¶ Spoilage tips</button>
    <button class="qbtn" onclick="quickAsk('When should I harvest wheat?')">üåæ Wheat harvest</button>
  </div>
  <div class="typing-row" id="typingRow">
    <div class="tbubble"><div class="tdot"></div><div class="tdot"></div><div class="tdot"></div></div>
  </div>
  <div class="chat-inp-row">
    <input class="chat-inp" id="chatInp" placeholder="Ask Annadata AI anything‚Ä¶" onkeydown="if(event.key==='Enter')sendChat()">
    <button class="chat-send" onclick="sendChat()">‚û§</button>
  </div>
</div>

<script>
// ‚îÄ‚îÄ Config ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const API_BASE = window.API_BASE || 'http://localhost:8000';

// ‚îÄ‚îÄ Nav ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function gotoSec(id, btn) {
  document.getElementById(id)?.scrollIntoView({behavior:'smooth',block:'start'});
  if(btn){ document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active')); btn.classList.add('active'); }
}
let currentLang='en';

// ‚îÄ‚îÄ Full Hindi/English translation dictionary ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const T={
  en:{
    navHome:'üè† Home',navAnalyzer:'üîç Analyzer',navAbout:'‚ÑπÔ∏è About',navSchemes:'üèõÔ∏è Govt Schemes',navCta:'‚ö° Free Analysis',
    heroH1:'Smart Farming,<br><span>Better Earnings</span><br>for Every Kisan',
    heroP:"India's AI-powered farm-to-market platform. Know exactly <strong>when to harvest</strong>, <strong>where to sell</strong>, and <strong>how to store</strong> ‚Äî in plain language, in your language.",
    heroBtnA:'‚ö° Get Free Analysis',heroBtnB:'üèõÔ∏è View Govt Schemes',
    s1:'Mandi Prices Tracked',s2:'Avg Waste Reduction',s3:'Crops Supported',
    p1:'üå°Ô∏è Live Weather',p2:'üìà Real Mandi Data',p3:'‚úÖ Explainable AI',p4:'üó£Ô∏è Hindi Support',
    f1h:'Harvest Window Advisor',f1p:'Weather + soil data combined to find your perfect 4-day harvest window.',
    f2h:'Best Mandi Finder',f2p:'Net profit after transport ‚Äî not just the highest price. Real data from 500+ markets.',
    f3h:'Spoilage Risk Guard',f3p:'Post-harvest spoilage predicted. Preservation actions ranked by cost-effectiveness.',
    f4h:'Annadata AI Chat',f4p:'Ask farming questions in Hindi or English. Your personal advisor, 24√ó7.',
    secA1:'üîç Crop Intelligence Analyzer',secA2:'Enter your crop details ‚Äî get harvest timing, best market, spoilage risk & preservation advice in seconds',
    cTitle:'üå± Tell us about your crop',cSub:'All fields are used to give you the most accurate, personalised recommendation',
    lCrop:'Crop Type',lState:'State',lDistrict:'District / Mandi Area',lStage:'Harvest Stage',lStorage:'Storage Available',lLand:'Land Size (acres)',
    btnA:'‚ö° Get My Recommendations ‚Äî Free',
    k1:'Best Harvest Window',k2:'Spoilage Risk',k3:'Expected Net Profit',
    m1h:'Optimal Harvest Window',m1s:'Based on weather + crop maturity',
    m2h:'Best Market to Sell',m2s:'Price vs transport cost analysis',
    m3h:'Post-Harvest Spoilage Risk',m3s:'Storage + transit analysis',
    m4h:'Preservation Actions',m4s:'Ranked by cost-effectiveness',
    whyT:'Why did we recommend this?',whyS:'Every recommendation comes with a full explanation ‚Äî because trust matters as much as accuracy',
    secB1:'‚ÑπÔ∏è About KisanMitra',secB2:"Built to solve India's farm-to-market intelligence gap",
    a1h:'Weather Intelligence',a1p:'7-day IMD-based forecasts integrated into every harvest recommendation.',
    a2h:'Real Mandi Data',a2p:'AGMARKNET price data from 500+ mandis across India, updated daily.',
    a3h:'Soil Health Aware',a3p:'Crop maturity windows calibrated with soil moisture and nutrient data.',
    a4h:'Built for Farmers',a4p:'Plain language, Hindi support ‚Äî works on a basic Android phone.',
    msT:'Our Mission',msP:'Technology should work <em>for</em> the farmer, not the other way around. We design every feature asking: <em>"Can a farmer with a basic Android phone understand and trust this?"</em>',
    t1:'AI/ML Team',t1p:'Harvest & price models',t2:'Data Team',t2p:'Mandi & weather pipelines',t3:'Design Team',t3p:'Farmer-first UX',t4:'Agri Advisors',t4p:'Domain validation',
    secC1:'üèõÔ∏è Government Farmer Schemes',secC2:'Central & state schemes you may be eligible for ‚Äî updated 2024‚Äì25',
    fb1:'All Schemes',fb2:'üèõÔ∏è Central Govt',fb3:'üó∫Ô∏è State Govt',fb4:'üí≥ Credit & Insurance',
    schLink:'Learn more & Apply ‚Üí',
    ls1:'Fetching weather forecast (7-day)',ls2:'Reading soil health indicators',ls3:'Scanning mandi price history (90-day)',
    ls4:'Calculating optimal harvest window',ls5:'Assessing spoilage risk & storage',ls6:'Ranking best markets by net profit',
    ldT:'Analyzing your crop‚Ä¶',ldS:'Pulling real-time data from multiple sources',
    chatN:'Annadata AI',chatS:'Your personal crop advisor',chatP:'Ask Annadata AI anything‚Ä¶',
    fabL:'Annadata AI üåæ',
    q1:'üçÖ Tomato prices',q2:'üèõÔ∏è PM Kisan',q3:'üì¶ Spoilage tips',q4:'üåæ Wheat harvest',
    footC:'¬© 2025 KisanMitra. Built with ‚ù§Ô∏è for Indian Farmers. | Data: AGMARKNET, IMD',
    chatWelcome:"üôè Namaste! I'm <strong>Annadata AI</strong> ‚Äî your personal farming assistant.<br><br>Ask me anything about crops, mandi prices, weather timing, or government schemes. Hindi or English ‚Äî both work! üåæ",
  },
  hi:{
    navHome:'üè† ‡§π‡•ã‡§Æ',navAnalyzer:'üîç ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§ï',navAbout:'‚ÑπÔ∏è ‡§π‡§Æ‡§æ‡§∞‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç',navSchemes:'üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç',navCta:'‚ö° ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
    heroH1:'‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§ñ‡•á‡§§‡•Ä,<br><span>‡§¨‡•á‡§π‡§§‡§∞ ‡§ï‡§Æ‡§æ‡§à</span><br>‡§π‡§∞ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è',
    heroP:'‡§≠‡§æ‡§∞‡§§ ‡§ï‡§æ AI-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ï‡•É‡§∑‡§ø ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ‡•§ ‡§ú‡§æ‡§®‡•á‡§Ç ‚Äî <strong>‡§ï‡§¨ ‡§ï‡§æ‡§ü‡•á‡§Ç</strong>, <strong>‡§ï‡§π‡§æ‡§Å ‡§¨‡•á‡§ö‡•á‡§Ç</strong>, ‡§î‡§∞ <strong>‡§ï‡•à‡§∏‡•á ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡§∞‡•á‡§Ç</strong> ‚Äî ‡§∏‡§∞‡§≤ ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç‡•§',
    heroBtnA:'‚ö° ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç',heroBtnB:'üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç',
    s1:'‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ ‡§ü‡•ç‡§∞‡•à‡§ï',s2:'‡§î‡§∏‡§§ ‡§¨‡§∞‡•ç‡§¨‡§æ‡§¶‡•Ä ‡§ï‡§Æ‡•Ä',s3:'‡§´‡§∏‡§≤‡•á‡§Ç ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§',
    p1:'üå°Ô∏è ‡§≤‡§æ‡§á‡§µ ‡§Æ‡•å‡§∏‡§Æ',p2:'üìà ‡§Ö‡§∏‡§≤‡•Ä ‡§Æ‡§Ç‡§°‡•Ä ‡§°‡•á‡§ü‡§æ',p3:'‚úÖ ‡§∏‡§Æ‡§ù‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø AI',p4:'üó£Ô∏è ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®',
    f1h:'‡§ï‡§ü‡§æ‡§à ‡§µ‡§ø‡§Ç‡§°‡•ã ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞',f1p:'‡§Æ‡•å‡§∏‡§Æ ‡§î‡§∞ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§°‡•á‡§ü‡§æ ‡§∏‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡•Ä 4-‡§¶‡§ø‡§® ‡§ï‡§ü‡§æ‡§à ‡§µ‡§ø‡§Ç‡§°‡•ã ‡§ñ‡•ã‡§ú‡•á‡§Ç‡•§',
    f2h:'‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Æ‡§Ç‡§°‡•Ä ‡§ñ‡•ã‡§ú‡•á‡§Ç',f2p:'‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§≤‡§æ‡§≠ ‚Äî ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§ï‡•Ä‡§Æ‡§§ ‡§®‡§π‡•Ä‡§Ç‡•§ 500+ ‡§Æ‡§Ç‡§°‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§°‡•á‡§ü‡§æ‡•§',
    f3h:'‡§ñ‡§∞‡§æ‡§¨‡•Ä ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§ó‡§æ‡§∞‡•ç‡§°',f3p:'‡§ï‡§ü‡§æ‡§à ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§ñ‡§∞‡§æ‡§¨‡•Ä ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡•§ ‡§≤‡§æ‡§ó‡§§ ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§∞‡•à‡§Ç‡§ï‡•§',
    f4h:'‡§Ö‡§®‡•ç‡§®‡§¶‡§æ‡§§‡§æ AI ‡§ö‡•à‡§ü',f4p:'‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ø‡§æ ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Æ‡•á‡§Ç ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•á ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞, 24√ó7‡•§',
    secA1:'üîç ‡§´‡§∏‡§≤ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§ï',secA2:'‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á‡§Ç ‚Äî ‡§ï‡§ü‡§æ‡§à ‡§ï‡§æ ‡§∏‡§Æ‡§Ø, ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Æ‡§Ç‡§°‡•Ä, ‡§ñ‡§∞‡§æ‡§¨‡•Ä ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§î‡§∞ ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§∏‡§≤‡§æ‡§π ‡§™‡§æ‡§è‡§Ç',
    cTitle:'üå± ‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§è‡§Ç',cSub:'‡§∏‡§¨‡§∏‡•á ‡§∏‡§ü‡•Ä‡§ï ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à',
    lCrop:'‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',lState:'‡§∞‡§æ‡§ú‡•ç‡§Ø',lDistrict:'‡§ú‡§ø‡§≤‡§æ / ‡§Æ‡§Ç‡§°‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞',lStage:'‡§ï‡§ü‡§æ‡§à ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø',lStorage:'‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§≠‡§Ç‡§°‡§æ‡§∞‡§£',lLand:'‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ (‡§è‡§ï‡§°‡§º)',
    btnA:'‚ö° ‡§Æ‡•á‡§∞‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç ‡§™‡§æ‡§è‡§Ç ‚Äî ‡§Æ‡•Å‡§´‡•ç‡§§',
    k1:'‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ï‡§ü‡§æ‡§à ‡§µ‡§ø‡§Ç‡§°‡•ã',k2:'‡§ñ‡§∞‡§æ‡§¨‡•Ä ‡§ú‡•ã‡§ñ‡§ø‡§Æ',k3:'‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§≤‡§æ‡§≠',
    m1h:'‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§ï‡§ü‡§æ‡§à ‡§µ‡§ø‡§Ç‡§°‡•ã',m1s:'‡§Æ‡•å‡§∏‡§Æ ‡§î‡§∞ ‡§´‡§∏‡§≤ ‡§™‡§∞‡§ø‡§™‡§ï‡•ç‡§µ‡§§‡§æ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞',
    m2h:'‡§¨‡•á‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Æ‡§Ç‡§°‡•Ä',m2s:'‡§ï‡•Ä‡§Æ‡§§ ‡§¨‡§®‡§æ‡§Æ ‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§≤‡§æ‡§ó‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
    m3h:'‡§ï‡§ü‡§æ‡§à ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§ñ‡§∞‡§æ‡§¨‡•Ä ‡§ú‡•ã‡§ñ‡§ø‡§Æ',m3s:'‡§≠‡§Ç‡§°‡§æ‡§∞‡§£ ‡§î‡§∞ ‡§™‡§æ‡§∞‡§ó‡§Æ‡§® ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
    m4h:'‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§ï‡§æ‡§∞‡•ç‡§Ø',m4s:'‡§≤‡§æ‡§ó‡§§-‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§∂‡•Ä‡§≤‡§§‡§æ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∞‡•à‡§Ç‡§ï',
    whyT:'‡§π‡§Æ‡§®‡•á ‡§Ø‡§π ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§∏‡•Å‡§ù‡§æ‡§Ø‡§æ?',whyS:'‡§π‡§∞ ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•á ‡§™‡•Ä‡§õ‡•á ‡§ï‡§æ ‡§ï‡§æ‡§∞‡§£ ‡§¶‡§ø‡§ñ‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‚Äî ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§â‡§§‡§®‡§æ ‡§π‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à ‡§ú‡§ø‡§§‡§®‡•Ä ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ',
    secB1:'‚ÑπÔ∏è KisanMitra ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç',secB2:'‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§ï‡•É‡§∑‡§ø-‡§∏‡•á-‡§¨‡§æ‡§ú‡§º‡§æ‡§∞ ‡§ï‡•Ä ‡§ñ‡•Å‡§´‡§ø‡§Ø‡§æ ‡§ï‡§Æ‡•Ä ‡§ï‡•ã ‡§¶‡•Ç‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ',
    a1h:'‡§Æ‡•å‡§∏‡§Æ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ',a1p:'‡§π‡§∞ ‡§ï‡§ü‡§æ‡§à ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§Æ‡•á‡§Ç 7-‡§¶‡§ø‡§® IMD-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®‡•§',
    a2h:'‡§Ö‡§∏‡§≤‡•Ä ‡§Æ‡§Ç‡§°‡•Ä ‡§°‡•á‡§ü‡§æ',a2p:'‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç 500+ ‡§Æ‡§Ç‡§°‡§ø‡§Ø‡•ã‡§Ç ‡§∏‡•á AGMARKNET ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§°‡•á‡§ü‡§æ, ‡§¶‡•à‡§®‡§ø‡§ï ‡§Ö‡§™‡§°‡•á‡§ü‡•§',
    a3h:'‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï',a3p:'‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§®‡§Æ‡•Ä ‡§î‡§∞ ‡§™‡•ã‡§∑‡§ï ‡§§‡§§‡•ç‡§µ ‡§°‡•á‡§ü‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡•à‡§≤‡§ø‡§¨‡•ç‡§∞‡•á‡§ü‡•§',
    a4h:'‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ‡§Ø‡§æ',a4p:'‡§∏‡§∞‡§≤ ‡§≠‡§æ‡§∑‡§æ, ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‚Äî ‡§¨‡•á‡§∏‡§ø‡§ï Android ‡§´‡•ã‡§® ‡§™‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§',
    msT:'‡§π‡§Æ‡§æ‡§∞‡§æ ‡§Æ‡§ø‡§∂‡§®',msP:'‡§§‡§ï‡§®‡•Ä‡§ï ‡§ï‡§ø‡§∏‡§æ‡§® <em>‡§ï‡•á ‡§≤‡§ø‡§è</em> ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§π‡§Æ ‡§π‡§∞ ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§Ø‡§π ‡§™‡•Ç‡§õ‡§ï‡§∞ ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç: <em>"‡§ï‡•ç‡§Ø‡§æ ‡§¨‡•á‡§∏‡§ø‡§ï Android ‡§´‡•ã‡§® ‡§µ‡§æ‡§≤‡§æ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§á‡§∏‡•á ‡§∏‡§Æ‡§ù ‡§î‡§∞ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à?"</em>',
    t1:'AI/ML ‡§ü‡•Ä‡§Æ',t1p:'‡§ï‡§ü‡§æ‡§à ‡§î‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§Æ‡•â‡§°‡§≤',t2:'‡§°‡•á‡§ü‡§æ ‡§ü‡•Ä‡§Æ',t2p:'‡§Æ‡§Ç‡§°‡•Ä ‡§î‡§∞ ‡§Æ‡•å‡§∏‡§Æ ‡§™‡§æ‡§á‡§™‡§≤‡§æ‡§á‡§®',t3:'‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§® ‡§ü‡•Ä‡§Æ',t3p:'‡§ï‡§ø‡§∏‡§æ‡§®-‡§™‡•ç‡§∞‡§•‡§Æ UX',t4:'‡§ï‡•É‡§∑‡§ø ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞',t4p:'‡§°‡•ã‡§Æ‡•á‡§® ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§®',
    secC1:'üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§® ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç',secC2:'‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§î‡§∞ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç ‚Äî 2024‚Äì25 ‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§°',
    fb1:'‡§∏‡§≠‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç',fb2:'üèõÔ∏è ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§∏‡§∞‡§ï‡§æ‡§∞',fb3:'üó∫Ô∏è ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∏‡§∞‡§ï‡§æ‡§∞',fb4:'üí≥ ‡§ã‡§£ ‡§î‡§∞ ‡§¨‡•Ä‡§Æ‡§æ',
    schLink:'‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§æ‡§®‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç ‚Üí',
    ls1:'‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à (7-‡§¶‡§ø‡§®)',ls2:'‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§Ç‡§ï‡•á‡§§‡§ï ‡§™‡§¢‡§º‡•á ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç',ls3:'‡§Æ‡§Ç‡§°‡•Ä ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§∏‡•ç‡§ï‡•à‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à (90-‡§¶‡§ø‡§®)',
    ls4:'‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§ï‡§ü‡§æ‡§à ‡§µ‡§ø‡§Ç‡§°‡•ã ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ',ls5:'‡§ñ‡§∞‡§æ‡§¨‡•Ä ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§î‡§∞ ‡§≠‡§Ç‡§°‡§æ‡§∞‡§£ ‡§ï‡§æ ‡§Ü‡§ï‡§≤‡§®',ls6:'‡§∂‡•Å‡§¶‡•ç‡§ß ‡§≤‡§æ‡§≠ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Æ‡§Ç‡§°‡§ø‡§Ø‡§æ‡§Ç ‡§∞‡•à‡§Ç‡§ï',
    ldT:'‡§Ü‡§™‡§ï‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‚Ä¶',ldS:'‡§ï‡§à ‡§∏‡•ç‡§∞‡•ã‡§§‡•ã‡§Ç ‡§∏‡•á ‡§∞‡§ø‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à',
    chatN:'‡§Ö‡§®‡•ç‡§®‡§¶‡§æ‡§§‡§æ AI',chatS:'‡§Ü‡§™‡§ï‡§æ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞',chatP:'‡§Ö‡§®‡•ç‡§®‡§¶‡§æ‡§§‡§æ AI ‡§∏‡•á ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç‚Ä¶',
    fabL:'‡§Ö‡§®‡•ç‡§®‡§¶‡§æ‡§§‡§æ AI üåæ',
    q1:'üçÖ ‡§ü‡§Æ‡§æ‡§ü‡§∞ ‡§≠‡§æ‡§µ',q2:'üèõÔ∏è PM ‡§ï‡§ø‡§∏‡§æ‡§®',q3:'üì¶ ‡§ñ‡§∞‡§æ‡§¨‡•Ä ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç',q4:'üåæ ‡§ó‡•á‡§π‡•Ç‡§Ç ‡§ï‡§ü‡§æ‡§à',
    footC:'¬© 2025 KisanMitra. ‚ù§Ô∏è ‡§∏‡•á ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ | ‡§°‡•á‡§ü‡§æ: AGMARKNET, IMD',
    chatWelcome:"üôè ‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç <strong>‡§Ö‡§®‡•ç‡§®‡§¶‡§æ‡§§‡§æ AI</strong> ‡§π‡•Ç‡§Å ‚Äî ‡§Ü‡§™‡§ï‡§æ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ñ‡•á‡§§‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§ï‡•§<br><br>‡§´‡§∏‡§≤, ‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ, ‡§ï‡§ü‡§æ‡§à ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø, ‡§Ø‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ø‡§æ ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‚Äî ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ö‡§≤‡§§‡•á ‡§π‡•à‡§Ç! üåæ",
  }
};

function applyLang(lang){
  const L=T[lang];
  // Navbar
  const nl=document.querySelectorAll('.nav-link');
  if(nl[0])nl[0].textContent=L.navHome; if(nl[1])nl[1].textContent=L.navAnalyzer;
  if(nl[2])nl[2].textContent=L.navAbout; if(nl[3])nl[3].textContent=L.navSchemes;
  const nc=document.querySelector('.nav-cta'); if(nc)nc.textContent=L.navCta;
  // Hero
  const h1=document.querySelector('.hero-h1'); if(h1)h1.innerHTML=L.heroH1;
  const hp=document.querySelector('.hero-p'); if(hp)hp.innerHTML=L.heroP;
  const hb=document.querySelectorAll('.hero-btns button');
  if(hb[0])hb[0].textContent=L.heroBtnA; if(hb[1])hb[1].textContent=L.heroBtnB;
  const sl=document.querySelectorAll('.stat-lbl');
  if(sl[0])sl[0].textContent=L.s1; if(sl[1])sl[1].textContent=L.s2; if(sl[2])sl[2].textContent=L.s3;
  const pl=document.querySelectorAll('.hero-pill');
  [L.p1,L.p2,L.p3,L.p4].forEach((v,i)=>{if(pl[i])pl[i].textContent=v;});
  const fh=document.querySelectorAll('.feat-card h4'),fp=document.querySelectorAll('.feat-card p');
  [[L.f1h,L.f1p],[L.f2h,L.f2p],[L.f3h,L.f3p],[L.f4h,L.f4p]].forEach(([h,p],i)=>{
    if(fh[i])fh[i].textContent=h; if(fp[i])fp[i].textContent=p;
  });
  // Analyzer section
  const st=document.querySelectorAll('.sec-title'),ss=document.querySelectorAll('.sec-sub');
  if(st[0])st[0].textContent=L.secA1; if(ss[0])ss[0].textContent=L.secA2;
  const ct=document.querySelector('.card-title'); if(ct)ct.innerHTML='<span>üå±</span> '+L.cTitle.replace('üå± ','');
  const csb=document.querySelector('.card-sub'); if(csb)csb.textContent=L.cSub;
  const lbs=document.querySelectorAll('.form-group label');
  [L.lCrop,L.lState,L.lDistrict,L.lStage,L.lStorage,L.lLand].forEach((v,i)=>{if(lbs[i])lbs[i].textContent=v;});
  const ab=document.querySelector('.analyze-btn'); if(ab)ab.textContent=L.btnA;
  const kl=document.querySelectorAll('.kpi-lbl');
  if(kl[0])kl[0].textContent=L.k1; if(kl[1])kl[1].textContent=L.k2; if(kl[2])kl[2].textContent=L.k3;
  const mh=document.querySelectorAll('.mod-hdr-t h3'),ms=document.querySelectorAll('.mod-hdr-t p');
  [[L.m1h,L.m1s],[L.m2h,L.m2s],[L.m3h,L.m3s],[L.m4h,L.m4s]].forEach(([h,p],i)=>{
    if(mh[i])mh[i].textContent=h; if(ms[i])ms[i].textContent=p;
  });
  // Why panel title/sub
  const wtEls=document.querySelectorAll('.why-card > div:first-child span');
  wtEls.forEach(el=>{if(el.style.fontFamily&&el.style.fontFamily.includes('Playfair'))el.textContent=L.whyT;});
  const wsSel=document.querySelector('.why-card > div:nth-child(2)');
  if(wsSel)wsSel.textContent=L.whyS;
  // About
  if(st[1])st[1].textContent=L.secB1; if(ss[1])ss[1].textContent=L.secB2;
  const ah=document.querySelectorAll('.ab-card h4'),ap=document.querySelectorAll('.ab-card p');
  [[L.a1h,L.a1p],[L.a2h,L.a2p],[L.a3h,L.a3p],[L.a4h,L.a4p]].forEach(([h,p],i)=>{
    if(ah[i])ah[i].textContent=h; if(ap[i])ap[i].textContent=p;
  });
  const msEl=document.querySelector('.mission-strip h3'); if(msEl)msEl.textContent=L.msT;
  const msPEl=document.querySelector('.mission-strip > p'); if(msPEl)msPEl.innerHTML=L.msP;
  const th=document.querySelectorAll('.team-c h4'),tp=document.querySelectorAll('.team-c p');
  [[L.t1,L.t1p],[L.t2,L.t2p],[L.t3,L.t3p],[L.t4,L.t4p]].forEach(([h,p],i)=>{
    if(th[i])th[i].textContent=h; if(tp[i])tp[i].textContent=p;
  });
  // Schemes section
  if(st[2])st[2].textContent=L.secC1; if(ss[2])ss[2].textContent=L.secC2;
  const fb=document.querySelectorAll('.fbtn');
  if(fb[0])fb[0].textContent=L.fb1; if(fb[1])fb[1].textContent=L.fb2;
  if(fb[2])fb[2].textContent=L.fb3; if(fb[3])fb[3].textContent=L.fb4;
  // Loading overlay
  const lsIds=['ls1','ls2','ls3','ls4','ls5','ls6'];
  lsIds.forEach(id=>{const el=document.getElementById(id);if(el)el.textContent=L[id];});
  const ldT=document.querySelector('.loading-box h3'); if(ldT)ldT.textContent=L.ldT;
  const ldS=document.querySelector('.loading-box > p'); if(ldS)ldS.textContent=L.ldS;
  // Chat UI
  const chn=document.querySelector('.chat-hdr-t h4'); if(chn)chn.textContent=L.chatN;
  const chs=document.querySelector('.chat-hdr-t p'); if(chs)chs.textContent=L.chatS;
  const chi=document.getElementById('chatInp'); if(chi)chi.placeholder=L.chatP;
  const fl=document.querySelector('.fab-label'); if(fl)fl.textContent=L.fabL;
  const qb=document.querySelectorAll('.qbtn');
  [L.q1,L.q2,L.q3,L.q4].forEach((v,i)=>{if(qb[i])qb[i].textContent=v;});
  // Footer
  const fc=document.querySelector('.f-copy'); if(fc)fc.textContent=L.footC;
  // Footer links text (Home/About etc)
  const fls=document.querySelectorAll('.f-links a');
  if(fls[0])fls[0].textContent=lang==='hi'?'‡§π‡•ã‡§Æ':'Home';
  if(fls[1])fls[1].textContent=lang==='hi'?'‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§ï':'Analyzer';
  if(fls[2])fls[2].textContent=lang==='hi'?'‡§π‡§Æ‡§æ‡§∞‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç':'About';
  if(fls[3])fls[3].textContent=lang==='hi'?'‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç':'Schemes';
  // Re-render schemes with translated link text
  renderSchemes(currentFilter);
  // Add language switch message to chat
  addMsg('bot', L.chatWelcome);
}

function setLang(lang,btn){
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  currentLang=lang;
  applyLang(lang);
}

// ‚îÄ‚îÄ Schemes data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const SCHEMES=[
  {t:'central',n:'PM-KISAN ‚Äî Pradhan Mantri Kisan Samman Nidhi',d:'Direct income support of ‚Çπ6,000/year to eligible farmer families in three equal installments of ‚Çπ2,000 each. Over 11 crore farmers benefited.',b:'‚Çπ6,000/year per family',tags:['All Farmers','Direct Benefit'],link:'https://pmkisan.gov.in/'},
  {t:'credit', n:'Pradhan Mantri Fasal Bima Yojana (PMFBY)',d:'Crop insurance providing financial support for crop loss due to natural calamities, pests & diseases. Premium as low as 1.5‚Äì2% for farmers.',b:'Up to full sum insured on crop loss',tags:['Kharif','Rabi','Commercial'],link:'https://pmfby.gov.in/'},
  {t:'credit', n:'Kisan Credit Card (KCC)',d:'Timely access to credit for agricultural needs at 4% effective interest rate. Apply at any bank or cooperative society with land records.',b:'Up to ‚Çπ3 lakh @ 4% interest',tags:['Credit','Insurance','Flexible'],link:'https://www.nabard.org/content1.aspx?id=572&catid=23&mid=530'},
  {t:'central',n:'Paramparagat Krishi Vikas Yojana (PKVY)',d:'Promotes organic farming through cluster approach. Financial assistance of ‚Çπ50,000/hectare over 3 years for inputs, certification, and marketing.',b:'‚Çπ50,000/hectare over 3 years',tags:['Organic','Cluster','Certification'],link:'https://pgsindia-ncof.gov.in/pkvy/Index.aspx'},
  {t:'central',n:'Sub-Mission on Agricultural Mechanisation (SMAM)',d:'Subsidy on agricultural machinery. Up to 50% subsidy for small and marginal farmers on tractors, harvesters, power tillers and other implements.',b:'Up to 50% machinery subsidy',tags:['Equipment','Machinery','Tractor'],link:'https://agrimachinery.nic.in/'},
  {t:'central',n:'Soil Health Card Scheme',d:'Free soil testing for every farmer. Provides crop-wise recommendations for fertilizers and micronutrients to improve productivity and reduce input costs.',b:'Free soil testing + nutrient card',tags:['Soil','Free','Nutrition'],link:'https://soilhealth.dac.gov.in/'},
  {t:'state',  n:'State Disaster Relief Fund (SDRF)',d:'Compensation for crop loss from natural disasters ‚Äî drought, flood, hailstorm, cyclone, pest attack. Apply through local tehsildar or agriculture office.',b:'‚Çπ8,500‚Äì13,500/hectare compensation',tags:['Disaster','Natural Calamity','Compensation'],link:'https://ndma.gov.in/Natural-Hazards/Floods'},
  {t:'central',n:'e-NAM ‚Äî National Agriculture Market',d:'Online trading platform connecting farmers directly to buyers across India. Better price discovery, reduced middlemen, transparent auction system.',b:'Direct access to 1,000+ mandis',tags:['Market','Digital','Price Discovery'],link:'https://enam.gov.in/web/'},
  {t:'central',n:'mKisan Portal ‚Äî SMS Advisory',d:'SMS-based advisory service for real-time crop advisory, pest/disease alerts, and market prices directly to farmers\' mobile phones in regional languages.',b:'Free SMS crop advisories',tags:['Mobile','Advisory','Free'],link:'https://mkisan.gov.in/'},
  {t:'central',n:'Pradhan Mantri Krishi Sinchayee Yojana (PMKSY)',d:'Ensures water to every field (Har Khet Ko Pani) and improves water use efficiency (More Crop Per Drop). Subsidy on drip and sprinkler irrigation.',b:'55‚Äì90% subsidy on micro-irrigation',tags:['Irrigation','Water','Drip'],link:'https://pmksy.gov.in/'},
  {t:'central',n:'Rashtriya Krishi Vikas Yojana (RKVY)',d:'Incentivises states to increase public investment in agriculture. Supports agriculture infrastructure, post-harvest management and agri-business.',b:'Grants for agri infrastructure',tags:['Infrastructure','Investment','Post-Harvest'],link:'https://rkvy.nic.in/'},
  {t:'credit', n:'Agriculture Infrastructure Fund (AIF)',d:'Financing facility for post-harvest management infrastructure and community farming assets. Interest subvention of 3% per annum for 7 years.',b:'3% interest subvention up to ‚Çπ2 crore',tags:['Storage','Warehouse','Cold Chain'],link:'https://agriinfra.dac.gov.in/'},
];
let currentFilter='all';
function renderSchemes(f='all'){
  currentFilter=f;
  const L=T[currentLang];
  const g=document.getElementById('schemesGrid');
  const arr=f==='all'?SCHEMES:SCHEMES.filter(s=>s.t===f);
  const badgeEN={central:'üèõÔ∏è Central Govt',state:'üó∫Ô∏è State Govt',credit:'üí≥ Credit & Insurance'};
  const badgeHI={central:'üèõÔ∏è ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§∏‡§∞‡§ï‡§æ‡§∞',state:'üó∫Ô∏è ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∏‡§∞‡§ï‡§æ‡§∞',credit:'üí≥ ‡§ã‡§£ ‡§î‡§∞ ‡§¨‡•Ä‡§Æ‡§æ'};
  const badges=currentLang==='hi'?badgeHI:badgeEN;
  g.innerHTML=arr.map(s=>`
    <div class="scheme-c" data-type="${s.t}">
      <div class="sch-badge ${s.t}">${badges[s.t]}</div>
      <h3>${s.n}</h3><p>${s.d}</p>
      <div class="sch-benefit">‚úÖ ${s.b}</div>
      <div class="sch-tags">${s.tags.map(tag=>`<span class="sch-tag">${tag}</span>`).join('')}</div>
      <a class="sch-link" href="${s.link}" target="_blank" rel="noopener noreferrer">${L.schLink}</a>
    </div>`).join('');
}
function filterS(f,btn){
  document.querySelectorAll('.fbtn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderSchemes(f);
}
renderSchemes();

// ‚îÄ‚îÄ Loading ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function startLoading(cb){
  const ov=document.getElementById('loadingOverlay');ov.classList.add('active');
  const steps=['ls1','ls2','ls3','ls4','ls5','ls6'];
  steps.forEach(s=>{const e=document.getElementById(s);e.classList.remove('active','done');});
  document.getElementById('ls1').classList.add('active');
  let i=0;
  function tick(){
    if(i>0){document.getElementById(steps[i-1]).classList.remove('active');document.getElementById(steps[i-1]).classList.add('done');}
    if(i<steps.length){document.getElementById(steps[i]).classList.add('active');i++;setTimeout(tick,440+Math.random()*300);}
    else{setTimeout(()=>{ov.classList.remove('active');if(cb)cb();},280);}
  }
  tick();
}

// ‚îÄ‚îÄ Run analysis ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function runAnalysis(){
  const p={
    crop_type:    document.getElementById('cropType').value,
    state:        document.getElementById('state').value,
    district:     document.getElementById('district').value,
    harvest_stage:document.getElementById('harvestStage').value,
    storage_type: document.getElementById('storage').value,
    land_size:    parseFloat(document.getElementById('landSize').value)||2.5,
  };
  let d=null,err=null;
  const fp=fetch(`${API_BASE}/analyze`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(p)})
    .then(r=>{if(!r.ok)return r.json().then(e=>{throw new Error(e.detail||'API error '+r.status)});return r.json();})
    .then(x=>{d=x}).catch(e=>{err=e});
  startLoading(async()=>{
    await fp;
    if(err){
      document.getElementById('loadingOverlay').classList.remove('active');
      alert('‚ö†Ô∏è Could not get recommendations:\n'+err.message+'\n\nStart the API server first:\n  uvicorn main:app --reload --port 8000\n\nThen refresh this page.');
    } else renderResults(d);
  });
}

// ‚îÄ‚îÄ Render ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function renderResults(d){
  // KPIs
  document.getElementById('harvestDateVal').textContent=d.harvest_date_val;
  document.getElementById('harvestDaysVal').textContent=d.harvest_days_val;
  document.getElementById('spoilageVal').textContent=d.spoilage_val;
  document.getElementById('spoilageDescVal').textContent=d.spoilage_desc_val;
  document.getElementById('profitVal').textContent=d.profit_val;
  document.getElementById('profitDescVal').textContent=d.profit_desc_val;
  // Harvest
  document.getElementById('harvestRec').textContent=d.harvest_window.recommendation;
  document.getElementById('harvestRecSub').textContent=d.harvest_window.recommendation_sub;
  document.getElementById('harvestFactors').innerHTML=(d.harvest_window.factors||[]).map(f=>
    `<div class="fi ${f.type}"><div class="fdot"></div><span>${f.text}</span></div>`).join('');
  // Markets
  document.getElementById('mktBody').innerHTML=d.markets.map(m=>`
    <tr ${m.is_best?'class="br"':''}><td><strong>${m.name}</strong>${m.is_best?'<span class="best-badge">Best</span>':''}</td>
    <td style="font-weight:700;color:var(--leaf)">${m.price_display}</td><td>${m.transport_display}</td>
    <td><div class="pbar-wrap"><div class="pbar" style="width:${m.bar_width}px;background:${m.profit_color}"></div>
    <span style="font-weight:700;font-size:11px;color:${m.profit_color}">${m.net_profit_display}</span></div></td></tr>`).join('');
  const bm=d.markets[0];
  document.getElementById('trendAlert').innerHTML=`<div style="padding:10px;background:rgba(41,128,185,0.06);border-radius:9px;border:1px solid rgba(41,128,185,0.15)"><div style="font-size:11px;font-weight:700;color:#2980B9;margin-bottom:2px">üìä Price Trend</div><div style="font-size:12px;color:var(--muted)">${bm.name}: ${bm.trend}. Sell within 2‚Äì3 days of harvest.</div></div>`;
  // Gauge
  const sr=d.spoilage_risk;
  const rc=sr.risk_color.replace('var(--warn)','#E67E22').replace('var(--rust)','#C0392B').replace('var(--success)','#27AE60');
  // Recalculate dashoffset for r=34 circle: circumference = 2œÄ√ó34 ‚âà 213.6
  const circ=213.6; const offset=circ*(1-sr.risk_pct/100);
  document.getElementById('gaugeArc').setAttribute('stroke',rc);
  document.getElementById('gaugeArc').setAttribute('stroke-dashoffset',offset.toFixed(1));
  document.getElementById('gaugeN').textContent=sr.risk_pct+'%'; document.getElementById('gaugeN').style.color=rc;
  document.getElementById('gaugeL').textContent=sr.risk_level+' Risk'; document.getElementById('gaugeL').style.color=rc;
  document.getElementById('gaugeD').textContent=sr.description;
  document.getElementById('spoilageFacts').innerHTML=(sr.factors||[]).map(f=>`<div class="fi ${f.type}"><div class="fdot"></div><span>${f.text}</span></div>`).join('');
  // Actions
  document.getElementById('actList').innerHTML=(d.preservation_actions||[]).map(a=>{
    const ds=Array.from({length:5},(_,i)=>`<div class="dot${i<a.effectiveness?' f':''}"></div>`).join('');
    return `<div class="act-item"><div class="act-rank ${a.rank_class}">${a.rank}</div><div class="act-body"><div class="act-name">${a.title}</div><div class="act-detail">${a.detail}</div></div><div style="text-align:right"><div class="act-cost">${a.cost_display}</div><div class="dots" style="justify-content:flex-end;margin-top:3px">${ds}</div></div></div>`;
  }).join('');
  // Why
  document.getElementById('reasonGrid').innerHTML=(d.reasoning_steps||[]).map(s=>
    `<div class="reason-step"><div class="rs-num">${s.step_num}</div><div class="rs-title">${s.icon} ${s.title}</div><div class="rs-desc">${s.desc}</div></div>`).join('');
  document.getElementById('confTitle').textContent=`Prediction Confidence: ${d.confidence.score}%`;
  document.getElementById('confBasis').textContent=d.confidence.basis;
  document.getElementById('confBar').style.width=d.confidence.score+'%';
  document.getElementById('confPct').textContent=d.confidence.label;
  // Show
  const res=document.getElementById('resultsSection');
  res.classList.add('visible');
  res.scrollIntoView({behavior:'smooth',block:'start'});
}

// ‚ïê‚ïê‚ïê‚ïê ANNADATA AI ‚Äî REAL-TIME CLAUDE API WITH STREAMING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

let chatHistory = [];
let isStreaming  = false;

const SYSTEM_PROMPT = `You are Annadata AI (‡§Ö‡§®‡•ç‡§®‡§¶‡§æ‡§§‡§æ AI), a warm and expert Indian farming assistant built into KisanMitra ‚Äî India's smart farm-to-market platform.

Your knowledge covers:
- All major Indian crops: tomato, wheat, rice, onion, potato, soybean, cotton, maize, chickpea, sugarcane, banana, mango, chilli, groundnut, mustard
- Mandi prices, APMC markets, e-NAM, MSP (Minimum Support Price) for 2024-25
- Harvest timing, crop maturity signs, post-harvest handling, cold storage
- Seasonal price trends, best time to sell, market selection strategy
- Government schemes: PM-KISAN, PMFBY (Fasal Bima), KCC (Kisan Credit Card), PKVY, SMAM, Soil Health Card, RKVY, AIF, e-NAM, PMKSY, mKisan
- Soil health, fertilizers (NPK), pesticides, pest/disease management
- Weather effects on farming, irrigation methods
- Farmer Producer Organisations (FPO), cooperative selling

Response rules:
- Be concise and practical (3-6 sentences for simple Q, up to 10 for complex)
- Use ‚Ä¢ bullet points for lists (not markdown dashes)
- Use relevant emojis naturally: üåæ üçÖ üí∞ üì¶ üå¶Ô∏è üèõÔ∏è ‚úÖ ‚ùå
- If the user writes in Hindi (Devanagari), ALWAYS reply fully in Hindi
- If user writes in English, reply in English
- Give specific Indian price ranges (‚Çπ/kg or ‚Çπ/quintal) where relevant
- Always be encouraging and actionable ‚Äî farmers need real steps
- Start responses directly, no filler like "Great question!" or "Certainly!"
- When relevant, mention KisanMitra's free Crop Analyzer for personalized advice`;

function toggleChat(){ document.getElementById('chatWin').classList.toggle('open'); }

function addMsg(role, html) {
  const c = document.getElementById('chatMsgs');
  const timeStr = new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});
  const div = document.createElement('div');
  div.className = 'cmsg ' + role;
  div.innerHTML = `<div class="cbubble">${html}</div><div class="ctime">${timeStr}</div>`;
  c.appendChild(div);
  c.scrollTop = c.scrollHeight;
}

function fmtText(t) {
  return t
    .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
    .replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>')
    .replace(/\*(.*?)\*/g,'<em>$1</em>')
    .replace(/^‚Ä¢ (.+)$/gm,'<div style="display:flex;gap:6px;margin:2px 0"><span>‚Ä¢</span><span>$1</span></div>')
    .replace(/^(\d+)\. (.+)$/gm,'<div style="display:flex;gap:6px;margin:2px 0"><span>$1.</span><span>$2</span></div>')
    .replace(/\n\n/g,'<br><br>').replace(/\n/g,'<br>');
}

async function sendChat() {
  if (isStreaming) return;
  const inp = document.getElementById('chatInp');
  const msg = inp.value.trim();
  if (!msg) return;

  inp.value = '';
  inp.disabled = true;
  document.getElementById('quickBtns').style.display = 'none';

  // Show user message (escape HTML)
  const safeMsg = msg.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  addMsg('user', safeMsg);

  // Add to conversation history
  chatHistory.push({ role: 'user', content: msg });
  // Keep only last 12 turns to avoid token limits
  if (chatHistory.length > 24) chatHistory = chatHistory.slice(-24);

  // Show typing indicator
  const typingRow = document.getElementById('typingRow');
  typingRow.classList.add('vis');
  document.getElementById('chatMsgs').scrollTop = 9999;

  isStreaming = true;

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        system: SYSTEM_PROMPT,
        messages: chatHistory.slice(0, -1).concat([{ role:'user', content: msg }]),
        stream: true,
      })
    });

    typingRow.classList.remove('vis');

    if (!response.ok) {
      throw new Error('API error ' + response.status);
    }

    // Create streaming bubble
    const c = document.getElementById('chatMsgs');
    const timeStr = new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});
    const bubbleDiv = document.createElement('div');
    bubbleDiv.className = 'cmsg bot';
    const bubbleInner = document.createElement('div');
    bubbleInner.className = 'cbubble';
    bubbleInner.innerHTML = '<span class="cursor-blink">‚ñã</span>';
    const timeDiv = document.createElement('div');
    timeDiv.className = 'ctime';
    timeDiv.textContent = timeStr;
    bubbleDiv.appendChild(bubbleInner);
    bubbleDiv.appendChild(timeDiv);
    c.appendChild(bubbleDiv);

    let fullText = '';
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let buffer = '';

    while (true) {
      const { done, value } = await reader.read();
      if (done) break;
      buffer += decoder.decode(value, { stream: true });
      const lines = buffer.split('\n');
      buffer = lines.pop(); // keep incomplete line

      for (const line of lines) {
        if (!line.startsWith('data: ')) continue;
        const data = line.slice(6).trim();
        if (data === '[DONE]' || data === '') continue;
        try {
          const parsed = JSON.parse(data);
          if (parsed.type === 'content_block_delta' && parsed.delta?.type === 'text_delta') {
            fullText += parsed.delta.text;
            bubbleInner.innerHTML = fmtText(fullText) + '<span class="cursor-blink">‚ñã</span>';
            c.scrollTop = c.scrollHeight;
          }
        } catch(e) { /* skip malformed SSE */ }
      }
    }

    // Final render ‚Äî remove cursor
    bubbleInner.innerHTML = fmtText(fullText);
    c.scrollTop = c.scrollHeight;

    // Store assistant reply in history
    chatHistory.push({ role: 'assistant', content: fullText });

  } catch (err) {
    typingRow.classList.remove('vis');
    // Graceful fallback to local knowledge base
    addMsg('bot', fmtText(getLocalFallback(msg)));
    chatHistory.push({ role: 'assistant', content: '(local fallback used)' });
    console.warn('Annadata AI fallback used:', err.message);
  }

  isStreaming = false;
  inp.disabled = false;
  inp.focus();
}

// Local fallback when API unreachable
function getLocalFallback(msg) {
  const l = msg.toLowerCase();
  if(l.includes('tomato')||l.includes('‡§ü‡§Æ‡§æ‡§ü‡§∞')) return 'üçÖ Tomato prices: ‚Çπ20‚Äì35/kg at major mandis. Nashik APMC is Asia\'s largest tomato market.\n\nHarvest when 70‚Äì80% fruits turn red. Early morning harvesting (5‚Äì8 AM) reduces field heat damage significantly.';
  if(l.includes('wheat')||l.includes('‡§ó‡•á‡§π‡•Ç‡§Ç')) return 'üåæ Wheat MSP 2024‚Äì25: ‚Çπ2,275/quintal. Current market: ‚Çπ2,100‚Äì2,400/quintal.\n\nHarvest when grain moisture drops below 14%. Golden-yellow color + hard grain = ready to harvest.';
  if(l.includes('onion')||l.includes('‡§™‡•ç‡§Ø‡§æ‡§ú')) return 'üßÖ Onion prices vary widely (‚Çπ8‚Äì40/kg seasonally). Lasalgaon APMC is India\'s largest onion market.\n\nHarvest when 50% of tops fall naturally. Field cure 7‚Äì10 days before putting in storage.';
  if(l.includes('potato')||l.includes('‡§Ü‡§≤‡•Ç')) return 'ü•î Potato: ‚Çπ10‚Äì18/kg. Agra & Aligarh are key markets. Cold storage extends selling by 6‚Äì8 months.\n\nHarvest 10 days after vine dies. Cure at 15‚Äì20¬∞C for 2 weeks before selling.';
  if(l.includes('rice')||l.includes('paddy')||l.includes('‡§ö‡§æ‡§µ‡§≤')) return 'üçö Rice MSP 2024‚Äì25: ‚Çπ2,300/quintal (Common), ‚Çπ2,320 (Grade A).\n\nHarvest when 80‚Äì85% grains turn golden. Dry paddy to 14% moisture before storage.';
  if(l.includes('pm kisan')||l.includes('pmkisan')) return 'üèõÔ∏è PM-KISAN: ‚Çπ6,000/year in 3 installments of ‚Çπ2,000 each.\n\n‚úÖ All farmer families with cultivable land eligible\n‚ùå Excluded: Govt employees, income tax payers\nüìç Apply: pmkisan.gov.in or nearest CSC';
  if(l.includes('fasal bima')||l.includes('insurance')||l.includes('pmfby')) return 'üõ°Ô∏è PMFBY: Premium is only 2% for Kharif, 1.5% for Rabi.\n\nCoverage up to full crop value. Apply via your bank before crop sowing deadline. Claim if actual yield < threshold yield.';
  if(l.includes('kcc')||l.includes('kisan credit')) return 'üí≥ Kisan Credit Card: Crop loans up to ‚Çπ3 lakh at 4% effective interest.\n\n‚úÖ Apply at any bank/cooperative with land records\n‚úÖ Includes accident insurance ‚Çπ50,000\n‚úÖ Revolving credit ‚Äî repay after harvest';
  if(l.includes('spoilage')||l.includes('storage')||l.includes('preserve')) return 'üì¶ Top 3 ways to cut spoilage:\n\n‚Ä¢ Harvest early morning (5‚Äì8 AM) ‚Äî FREE\n‚Ä¢ Ventilated crates instead of gunny bags ‚Äî ‚Çπ800‚Äì1,200\n‚Ä¢ Pre-cool at cold storage before transit ‚Äî ‚Çπ2,500‚Äì3,000\n\nThis cuts spoilage from 35% to ~12%.';
  if(l.includes('mandi')||l.includes('market')||l.includes('sell')||l.includes('price')) return 'üè™ Tips to get best mandi price:\n\n‚Ä¢ Check e-NAM (enam.gov.in) for live prices before going\n‚Ä¢ Sell 2‚Äì3 days after harvest while produce is fresh\n‚Ä¢ Grade and sort before selling ‚Äî good quality = 20‚Äì30% premium\n‚Ä¢ Sell in morning when buyers are most active';
  if(l.includes('soil')||l.includes('‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä')) return 'üß™ Get a free Soil Health Card from your nearest KVK (Krishi Vigyan Kendra).\n\nCard shows N, P, K, pH, micronutrients + crop-specific fertilizer doses. New card every 3 years. Apply at soilhealth.dac.gov.in';
  return 'üåæ I\'m Annadata AI ‚Äî here to help with any farming question!\n\nAsk me about crop prices, harvest timing, storage tips, government schemes, or market advice. For personalized recommendations based on your specific crop and district, use the KisanMitra Analyzer above.';
}

function quickAsk(q) {
  document.getElementById('chatInp').value = q;
  sendChat();
}

// Blinking cursor CSS
const cs = document.createElement('style');
cs.textContent = `.cursor-blink{color:var(--leaf);animation:cblink .65s step-end infinite}@keyframes cblink{0%,100%{opacity:1}50%{opacity:0}}`;
document.head.appendChild(cs);
</script>
</body>
</html>
